<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Invertebrate COI 5P DNA Sequence Comparison and Protein Extraction</title>
<link rel="icon" type="image/png" href="favicon2.png">
     <link rel="apple-touch-icon" href="favicon2.png">

<script src="https://cdn.tailwindcss.com"></script>
<script>
  document.addEventListener('alpine:init', () => {

    // ── CODON TABLE 5 ──────────────────────────────────────────────────────
    const AAS   = "FFLLSSSSYY**CCWWLLLLPPPPHHQQRRRRIIMMTTTTNNKKSSSSVVVVAAAADDEEGGGG";
    const BASE1 = "TTTTTTTTTTTTTTTTCCCCCCCCCCCCCCCCAAAAAAAAAAAAAAAAGGGGGGGGGGGGGGGG";
    const BASE2 = "TTTTCCCCAAAAGGGGTTTTCCCCAAAAGGGGTTTTCCCCAAAAGGGGTTTTCCCCAAAAGGGG";
    const BASE3 = "TCAGTCAGTCAGTCAGTCAGTCAGTCAGTCAGTCAGTCAGTCAGTCAGTCAGTCAGTCAGTCAG";
    const CODON_MAP = {};
    for (let i = 0; i < 64; i++) CODON_MAP[BASE1[i]+BASE2[i]+BASE3[i]] = AAS[i];

    function translateFrame(dna, frame) {
      const seq = dna.replace(/[\s-]/g,'').toUpperCase().replace(/U/g,'T').slice(frame);
      let out = '';
      for (let i = 0; i <= seq.length - 3; i += 3) {
        const c = seq.slice(i, i+3);
        out += c.includes('N') ? '?' : (CODON_MAP[c] || '?');
      }
      return out;
    }

    function reverseComplement(seq) {
      const m = {A:'T',T:'A',C:'G',G:'C',N:'N'};
      return seq.split('').reverse().map(b => m[b]||b).join('');
    }

    function findBestShift(s1, s2) {
      let bestShift=0, maxMatches=-1;
      for (let shift=-(s2.length-10); shift<s1.length-10; shift++) {
        let matches=0, ov=0;
        const st=Math.max(0,shift), en=Math.min(s1.length, s2.length+shift);
        for (let i=st; i<en; i++) { ov++; if (s1[i]===s2[i-shift]) matches++; }
        if (ov>=20 && matches>maxMatches) { maxMatches=matches; bestShift=shift; }
      }
      return { shift:bestShift, matches:maxMatches };
    }

    function esc(s) {
      return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
    }

    // ── ALIGNER ────────────────────────────────────────────────────────────
    Alpine.data('aligner', () => ({
      fragA: '', fragB: '',
      result: null,
      running: false,
      copyStates: { ov1: false, ov2: false },

      run() {
        if (!this.fragA.trim() || !this.fragB.trim()) return;
        this.running = true;
        setTimeout(() => {
          const s1     = this.fragA.replace(/[-\s]/g,'').toUpperCase();
          const s2orig = this.fragB.replace(/[-\s]/g,'').toUpperCase();
          const s2rc   = reverseComplement(s2orig);

          const fwd = findBestShift(s1, s2orig);
          const rev = findBestShift(s1, s2rc);
          const useFwd = fwd.matches >= rev.matches;
          const s2     = useFwd ? s2orig : s2rc;
          const shift  = useFwd ? fwd.shift : rev.shift;

          const pad1 = Math.max(0,-shift), pad2 = Math.max(0,shift);
          const a1   = ' '.repeat(pad1)+s1;
          const a2   = ' '.repeat(pad2)+s2;
          const maxL = Math.max(a1.length, a2.length);

          let matchLine='', perfect=0, totalOv=0;
          for (let j=0; j<maxL; j++) {
            const c1 = j<a1.length ? a1[j] : ' ';
            const c2 = j<a2.length ? a2[j] : ' ';
            if (c1!==' ' && c2!==' ') {
              totalOv++;
              if (c1===c2) { matchLine+='|'; perfect++; }
              else matchLine+='.';
            } else matchLine+=' ';
          }

          const ovStart = Math.max(pad1,pad2);
          const ovEnd   = Math.min(s1.length+pad1, s2.length+pad2);

          this.result = {
            a1, a2, matchLine,
            ov1: a1.slice(ovStart,ovEnd).trim(),
            ov2: a2.slice(ovStart,ovEnd).trim(),
            direction: useFwd ? 'Forward' : 'Reverse Complement',
            identity: totalOv>0 ? ((perfect/totalOv)*100).toFixed(1) : '0.0',
            frac: `${perfect}/${totalOv}`,
            ovLen: ovEnd-ovStart,
          };
          this.running = false;
        }, 30);
      },

      copyText(key, text) {
        navigator.clipboard.writeText(text).then(() => {
          this.copyStates[key] = true;
          setTimeout(() => this.copyStates[key] = false, 1800);
        });
      }
    }));

    // ── TRANSLATOR ─────────────────────────────────────────────────────────
    Alpine.data('translator', () => ({
      seqs: [{ id: 1, val: '' }],
      nextId: 2,
      results: [],
      frameCopyStates: {},

      addSeq()      { this.seqs.push({ id: this.nextId++, val: '' }); },
      removeSeq(id) { this.seqs = this.seqs.filter(s => s.id !== id); },

      translate() {
        this.results = this.seqs
          .filter(s => s.val.trim())
          .map((s, idx) => ({
            index: idx+1,
            frames: [0,1,2].map(f => {
              const prot  = translateFrame(s.val, f);
              const stops = (prot.match(/\*/g)||[]).length;
              return { frame:f+1, prot, stops };
            })
          }));
      },

      copyFrame(seqIdx, frame, text) {
        const key = `${seqIdx}-${frame}`;
        navigator.clipboard.writeText(text).then(() => {
          this.frameCopyStates = {...this.frameCopyStates, [key]: true};
          setTimeout(() => {
            this.frameCopyStates = {...this.frameCopyStates, [key]: false};
          }, 1800);
        });
      },

      renderProt(prot) {
        return prot.split('').map(aa =>
          aa==='*' ? `<span class="text-red-500 font-bold">*</span>` : esc(aa)
        ).join('');
      }
    }));

    // ── COMPARATOR ─────────────────────────────────────────────────────────
    Alpine.data('comparator', () => ({
      p1: '', p2: '',
      result: null,

      compare() {
        const s1 = this.p1.trim().toUpperCase();
        const s2 = this.p2.trim().toUpperCase();
        if (!s1||!s2) return;
        const len = Math.min(s1.length, s2.length);
        let matches=0, mismatches=0, ambiguous=0, h1='', h2='';

        for (let i=0; i<len; i++) {
          const c1=s1[i], c2=s2[i];
          if (c1==='?'||c2==='?') {
            h1+=`<span class="text-slate-400">${esc(c1)}</span>`;
            h2+=`<span class="text-slate-400">${esc(c2)}</span>`;
            ambiguous++;
          } else if (c1===c2) {
            h1+=esc(c1); h2+=esc(c2); matches++;
          } else {
            h1+=`<span class="bg-amber-100 text-amber-700 rounded px-px font-semibold">${esc(c1)}</span>`;
            h2+=`<span class="bg-amber-100 text-amber-700 rounded px-px font-semibold">${esc(c2)}</span>`;
            mismatches++;
          }
        }
        if (s1.length>len) h1+=`<span class="text-slate-300">${esc(s1.slice(len))}</span>`;
        if (s2.length>len) h2+=`<span class="text-slate-300">${esc(s2.slice(len))}</span>`;

        const tv=matches+mismatches;
        this.result = {
          h1, h2, matches, mismatches, ambiguous,
          pct: tv>0 ? ((matches/tv)*100).toFixed(2) : '0.00',
          len1: s1.length, len2: s2.length
        };
      }
    }));

  });
</script>
<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.3/dist/cdn.min.js" defer></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
  [x-cloak] { display: none !important; }
  ::-webkit-scrollbar { width: 8px; height: 8px; }
  ::-webkit-scrollbar-track { background: #f1f5f9; }
  ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
  ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
  .seq-mono {
    font-family: 'Courier New', monospace;
    font-size: 12px;
    white-space: pre;
    letter-spacing: 0.04em;
  }
  .tab-active   { border-bottom: 2px solid #2563eb; color: #1d4ed8 !important; background: #eff6ff; }
  .tab-inactive { border-bottom: 2px solid transparent; }
  .tab-inactive:hover { color: #334155; background: #f8fafc; }
</style>
</head>
<body class="bg-slate-50 text-slate-800 min-h-screen font-sans pb-24">

<!-- ── HEADER ──────────────────────────────────────────────────────────────── -->
<header class="bg-white border-b border-slate-200 sticky top-0 z-30 shadow-sm">
  <div class="max-w-5xl mx-auto px-4 py-3 flex flex-wrap justify-between items-center gap-3">
    <div class="flex items-center gap-3">
      <div class="bg-blue-100 p-2 rounded-lg">
        <i class="fa-solid fa-dna text-blue-600 text-xl"></i>
      </div>
      <div>
        <h1 class="text-lg font-bold text-slate-900 leading-tight">Invertebrate DNA Sequencer</h1>
        <p class="text-[10px] text-slate-500 font-bold uppercase tracking-widest">DNA · Protein Analysis</p>
      </div>
    </div>
    <p class="text-[10px] text-slate-400 font-mono tracking-wider hidden sm:block">
      The Invertebrate Mitochondrial Code (transl_table=5)
    </p>
  </div>

  <!-- Tab row -->
  <div class="max-w-5xl mx-auto px-4 flex gap-1">
    <button onclick="showTab('align')" id="tab-align"
      class="tab-active text-slate-500 px-5 py-3 text-sm font-semibold rounded-t-lg transition-all">
      <i class="fa-solid fa-arrows-left-right mr-2 opacity-70"></i>Fragment Aligner
    </button>
    <button onclick="showTab('translate')" id="tab-translate"
      class="tab-inactive text-slate-500 px-5 py-3 text-sm font-semibold rounded-t-lg transition-all">
      <i class="fa-solid fa-arrow-right-to-bracket mr-2 opacity-70"></i>DNA → Amino Acid
    </button>
    <button onclick="showTab('compare')" id="tab-compare"
      class="tab-inactive text-slate-500 px-5 py-3 text-sm font-semibold rounded-t-lg transition-all">
      <i class="fa-solid fa-code-compare mr-2 opacity-70"></i>Protein Comparator
    </button>
  </div>
</header>

<!-- ── MAIN ────────────────────────────────────────────────────────────────── -->
<main class="max-w-5xl mx-auto px-4 py-8 space-y-5">

  <!-- ══ ALIGNER PANEL ══════════════════════════════════════════════════════ -->
  <div id="panel-align" x-data="aligner">

    <p class="text-sm text-slate-500 leading-relaxed mb-6">
      Paste two DNA fragments. The tool slides Fragment 2 — and its reverse complement — across Fragment 1
      to find the highest-identity overlap. Dashes and whitespace are stripped automatically.
    </p>

    <div class="grid md:grid-cols-2 gap-4 mb-4">
      <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-5">
        <label class="block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2">
          <i class="fa-solid fa-1 mr-1 text-blue-400"></i>Fragment 1
        </label>
        <textarea x-model="fragA" rows="5" placeholder="ATCGATCG…"
          class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg text-xs font-mono focus:ring-2 focus:ring-blue-400 outline-none resize-none transition-all"></textarea>
      </div>
      <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-5">
        <label class="block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2">
          <i class="fa-solid fa-2 mr-1 text-blue-400"></i>Fragment 2
        </label>
        <textarea x-model="fragB" rows="5" placeholder="ATCGATCG…"
          class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg text-xs font-mono focus:ring-2 focus:ring-blue-400 outline-none resize-none transition-all"></textarea>
      </div>
    </div>

    <button @click="run()"
      :disabled="running || !fragA.trim() || !fragB.trim()"
      :class="(running||!fragA.trim()||!fragB.trim()) ? 'opacity-50 cursor-not-allowed' : 'hover:bg-slate-900'"
      class="bg-slate-800 text-white px-6 py-2.5 rounded-lg text-sm font-bold shadow-sm transition-all flex items-center gap-2">
      <i class="fa-solid fa-play text-xs"></i>
      <span x-text="running ? 'Aligning…' : 'Run Alignment'"></span>
    </button>

    <!-- Results -->
    <template x-if="result">
      <div class="space-y-4 mt-6">

        <!-- Stats -->
        <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-5">
          <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-3">Alignment Summary</p>
          <div class="flex flex-wrap gap-6">
            <div>
              <p class="text-[10px] text-slate-400 uppercase tracking-widest mb-1">Direction</p>
              <p class="font-bold text-slate-700 font-mono text-sm" x-text="result.direction"></p>
            </div>
            <div>
              <p class="text-[10px] text-slate-400 uppercase tracking-widest mb-1">Identity</p>
              <p class="font-bold text-green-600 font-mono text-sm">
                <span x-text="result.frac"></span>
                <span class="text-slate-400 font-normal"> (<span x-text="result.identity"></span>%)</span>
              </p>
            </div>
            <div>
              <p class="text-[10px] text-slate-400 uppercase tracking-widest mb-1">Overlap Length</p>
              <p class="font-bold text-slate-700 font-mono text-sm"><span x-text="result.ovLen"></span> bp</p>
            </div>
          </div>
        </div>

        <!-- Full alignment — single box, no copy buttons -->
        <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-5">
          <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-3">Full Alignment</p>
          <div class="bg-slate-50 rounded-lg border border-slate-200 p-4 overflow-x-auto">
            <div class="seq-mono text-slate-700 mb-1">
              <span class="text-slate-400 select-none inline-block w-16">FRAG 1</span><span x-text="result.a1"></span>
            </div>
            <div class="seq-mono text-blue-400 mb-1">
              <span class="text-slate-300 select-none inline-block w-16">MATCH</span><span x-text="result.matchLine"></span>
            </div>
            <div class="seq-mono text-slate-700">
              <span class="text-slate-400 select-none inline-block w-16">FRAG 2</span><span x-text="result.a2"></span>
            </div>
          </div>
        </div>

        <!-- Overlap — two cards with copy buttons, no match line -->
        <div class="grid md:grid-cols-2 gap-4">
          <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-5">
            <div class="flex justify-between items-center mb-3">
              <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Overlap — Fragment 1</p>
              <button @click="copyText('ov1', result.ov1)"
                :class="copyStates.ov1 ? 'bg-green-600 hover:bg-green-700' : 'bg-slate-800 hover:bg-slate-900'"
                class="text-white px-3 py-1.5 rounded-lg text-xs font-bold transition-all flex items-center gap-1.5 shadow-sm">
                <i :class="copyStates.ov1 ? 'fa-solid fa-circle-check' : 'fa-solid fa-copy'"></i>
                <span x-text="copyStates.ov1 ? 'Copied!' : 'Copy'"></span>
              </button>
            </div>
            <div class="bg-slate-50 rounded-lg border border-slate-200 p-3 overflow-x-auto">
              <div class="seq-mono text-slate-700" x-text="result.ov1"></div>
            </div>
          </div>

          <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-5">
            <div class="flex justify-between items-center mb-3">
              <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Overlap — Fragment 2</p>
              <button @click="copyText('ov2', result.ov2)"
                :class="copyStates.ov2 ? 'bg-green-600 hover:bg-green-700' : 'bg-slate-800 hover:bg-slate-900'"
                class="text-white px-3 py-1.5 rounded-lg text-xs font-bold transition-all flex items-center gap-1.5 shadow-sm">
                <i :class="copyStates.ov2 ? 'fa-solid fa-circle-check' : 'fa-solid fa-copy'"></i>
                <span x-text="copyStates.ov2 ? 'Copied!' : 'Copy'"></span>
              </button>
            </div>
            <div class="bg-slate-50 rounded-lg border border-slate-200 p-3 overflow-x-auto">
              <div class="seq-mono text-slate-700" x-text="result.ov2"></div>
            </div>
          </div>
        </div>

      </div>
    </template>
  </div><!-- /aligner -->

  <!-- ══ TRANSLATOR PANEL ════════════════════════════════════════════════════ -->
  <div id="panel-translate" class="hidden" x-data="translator">

    <p class="text-sm text-slate-500 leading-relaxed mb-6">
      Translates DNA using <span class="font-semibold text-slate-700">NCBI Genetic Code Table 5</span>
      (Invertebrate Mitochondrial). All three reading frames are shown with stop codon counts.
    </p>

    <div class="space-y-4 mb-4">
      <template x-for="(seq, idx) in seqs" :key="seq.id">
        <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-5">
          <div class="flex justify-between items-center mb-3">
            <label class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">
              <i class="fa-solid fa-dna mr-1 text-blue-400"></i>Sequence <span x-text="idx+1"></span>
            </label>
            <button x-show="seqs.length > 1" @click="removeSeq(seq.id)"
              class="text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg p-1.5 transition-all">
              <i class="fa-solid fa-trash-can text-xs"></i>
            </button>
          </div>
          <textarea x-model="seq.val" rows="3" placeholder="ATCGATCG…"
            class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg text-xs font-mono focus:ring-2 focus:ring-blue-400 outline-none resize-none transition-all"></textarea>
        </div>
      </template>
    </div>

    <div class="flex gap-3 mb-6">
      <button @click="translate()"
        :disabled="seqs.every(s => !s.val.trim())"
        :class="seqs.every(s=>!s.val.trim()) ? 'opacity-50 cursor-not-allowed' : 'hover:bg-slate-900'"
        class="bg-slate-800 text-white px-6 py-2.5 rounded-lg text-sm font-bold shadow-sm transition-all flex items-center gap-2">
        <i class="fa-solid fa-play text-xs"></i>Translate All
      </button>
      <button @click="addSeq()"
        class="bg-white border border-slate-200 text-slate-600 hover:bg-slate-50 px-5 py-2.5 rounded-lg text-sm font-semibold transition-all flex items-center gap-2 shadow-sm">
        <i class="fa-solid fa-plus text-xs"></i>Add Sequence
      </button>
    </div>

    <!-- Results -->
    <div class="space-y-5" x-show="results.length > 0" x-cloak>
      <template x-for="res in results" :key="res.index">
        <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-5">
          <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-4">
            <i class="fa-solid fa-dna mr-1 text-blue-400"></i>Sequence <span x-text="res.index"></span>
          </p>
          <div class="space-y-3">
            <template x-for="fr in res.frames" :key="fr.frame">
              <div class="rounded-xl border border-slate-200 overflow-hidden">
                <!-- Frame header -->
                <div class="bg-slate-50 border-b border-slate-200 px-4 py-2.5 flex justify-between items-center">
                  <div class="flex items-center gap-3">
                    <span class="bg-slate-800 text-white text-[10px] font-black px-2.5 py-1 rounded-md tracking-widest">
                      FRAME <span x-text="fr.frame"></span>
                    </span>
                    <span class="text-[10px] font-bold px-2.5 py-1 rounded-full uppercase tracking-wider"
                      :class="{
                        'bg-green-100 text-green-700': fr.stops === 0,
                        'bg-amber-100 text-amber-700': fr.stops > 0 && fr.stops <= 2,
                        'bg-red-100 text-red-600': fr.stops > 2
                      }">
                      <span x-text="fr.stops"></span> stop<span x-text="fr.stops !== 1 ? 's' : ''"></span>
                    </span>
                  </div>
                  <button
                    @click="copyFrame(res.index, fr.frame, fr.prot)"
                    :class="frameCopyStates[res.index+'-'+fr.frame] ? 'bg-green-600 hover:bg-green-700' : 'bg-slate-800 hover:bg-slate-900'"
                    class="text-white px-3 py-1.5 rounded-lg text-xs font-bold transition-all flex items-center gap-1.5 shadow-sm">
                    <i :class="frameCopyStates[res.index+'-'+fr.frame] ? 'fa-solid fa-circle-check' : 'fa-solid fa-copy'"></i>
                    <span x-text="frameCopyStates[res.index+'-'+fr.frame] ? 'Copied!' : 'Copy Frame '+fr.frame"></span>
                  </button>
                </div>
                <!-- Protein sequence -->
                <div class="p-4 overflow-x-auto">
                  <div class="seq-mono text-slate-700 break-all" x-html="renderProt(fr.prot)"></div>
                </div>
              </div>
            </template>
          </div>
        </div>
      </template>
    </div>

  </div><!-- /translator -->

  <!-- ══ COMPARATOR PANEL ════════════════════════════════════════════════════ -->
  <div id="panel-compare" class="hidden" x-data="comparator">

    <p class="text-sm text-slate-500 leading-relaxed mb-6">
      Compare two amino acid sequences position-by-position.
      <span class="font-semibold text-amber-600">Amber highlights</span> mark mismatches;
      extra residues beyond the shorter sequence appear dimmed.
    </p>

    <div class="grid md:grid-cols-2 gap-4 mb-4">
      <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-5">
        <label class="block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2">
          <i class="fa-solid fa-p mr-1 text-blue-400"></i>Protein 1
        </label>
        <textarea x-model="p1" rows="4" placeholder="MLLFFNSK…"
          class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg text-xs font-mono focus:ring-2 focus:ring-blue-400 outline-none resize-none transition-all"></textarea>
      </div>
      <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-5">
        <label class="block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2">
          <i class="fa-solid fa-p mr-1 text-blue-400"></i>Protein 2
        </label>
        <textarea x-model="p2" rows="4" placeholder="MLLFFNSK…"
          class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg text-xs font-mono focus:ring-2 focus:ring-blue-400 outline-none resize-none transition-all"></textarea>
      </div>
    </div>

    <button @click="compare()"
      :disabled="!p1.trim() || !p2.trim()"
      :class="(!p1.trim()||!p2.trim()) ? 'opacity-50 cursor-not-allowed' : 'hover:bg-slate-900'"
      class="bg-slate-800 text-white px-6 py-2.5 rounded-lg text-sm font-bold shadow-sm transition-all flex items-center gap-2 mb-6">
      <i class="fa-solid fa-play text-xs"></i>Compare Sequences
    </button>

    <template x-if="result">
      <div class="space-y-4">
        <!-- Stats -->
        <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-5">
          <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-3">Comparison Summary</p>
          <div class="flex flex-wrap gap-6">
            <div>
              <p class="text-[10px] text-slate-400 uppercase tracking-widest mb-1">Identity</p>
              <p class="font-bold text-green-600 font-mono text-sm" x-text="result.pct + '%'"></p>
            </div>
            <div>
              <p class="text-[10px] text-slate-400 uppercase tracking-widest mb-1">Matches</p>
              <p class="font-bold text-slate-700 font-mono text-sm" x-text="result.matches"></p>
            </div>
            <div>
              <p class="text-[10px] text-slate-400 uppercase tracking-widest mb-1">Mismatches</p>
              <p class="font-bold text-amber-600 font-mono text-sm" x-text="result.mismatches"></p>
            </div>
            <div>
              <p class="text-[10px] text-slate-400 uppercase tracking-widest mb-1">Ambiguous</p>
              <p class="font-bold text-slate-400 font-mono text-sm" x-text="result.ambiguous"></p>
            </div>
            <div>
              <p class="text-[10px] text-slate-400 uppercase tracking-widest mb-1">Length 1</p>
              <p class="font-bold text-slate-700 font-mono text-sm"><span x-text="result.len1"></span> aa</p>
            </div>
            <div>
              <p class="text-[10px] text-slate-400 uppercase tracking-widest mb-1">Length 2</p>
              <p class="font-bold text-slate-700 font-mono text-sm"><span x-text="result.len2"></span> aa</p>
            </div>
          </div>
        </div>

        <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-5">
          <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2">Protein 1</p>
          <div class="bg-slate-50 rounded-lg border border-slate-200 p-4 overflow-x-auto">
            <div class="seq-mono text-slate-700 break-all" x-html="result.h1"></div>
          </div>
        </div>

        <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-5">
          <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2">Protein 2</p>
          <div class="bg-slate-50 rounded-lg border border-slate-200 p-4 overflow-x-auto">
            <div class="seq-mono text-slate-700 break-all" x-html="result.h2"></div>
          </div>
        </div>
      </div>
    </template>

  </div><!-- /comparator -->

</main>

<script>
  const PANELS = ['align','translate','compare'];
  function showTab(name) {
    PANELS.forEach(id => {
      const panel = document.getElementById('panel-'+id);
      const tab   = document.getElementById('tab-'+id);
      if (id === name) {
        panel.classList.remove('hidden');
        tab.classList.remove('tab-inactive');
        tab.classList.add('tab-active');
      } else {
        panel.classList.add('hidden');
        tab.classList.remove('tab-active');
        tab.classList.add('tab-inactive');
      }
    });
  }
</script>
</body>
</html>